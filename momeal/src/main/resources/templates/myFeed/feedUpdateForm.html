<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{frame/usual}">

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="favicon.ico">
<title>Tiny Dashboard - A Bootstrap Dashboard Template</title>
<!-- Simple bar CSS -->
<link rel="stylesheet" href="css/simplebar.css">
<!-- Fonts CSS -->
<link
	href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100;0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet">
<!-- Icons CSS -->
<link rel="stylesheet" href="css/feather.css">
<!-- Date Range Picker CSS -->
<link rel="stylesheet" href="css/daterangepicker.css">
<!-- App CSS -->
<link rel="stylesheet" href="css/app-light.css" id="lightTheme">
<link rel="stylesheet" href="css/app-dark.css" id="darkTheme" disabled>

<!-- Simple bar CSS -->
<link rel="stylesheet" href="css/simplebar.css">
<!-- Fonts CSS -->
<link
	href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100;0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet">
<!-- Icons CSS -->
<link rel="stylesheet" href="css/feather.css">
<link rel="stylesheet" href="css/select2.css">
<link rel="stylesheet" href="css/dropzone.css">
<link rel="stylesheet" href="css/uppy.min.css">
<link rel="stylesheet" href="css/jquery.steps.css">
<link rel="stylesheet" href="css/jquery.timepicker.css">
<link rel="stylesheet" href="css/quill.snow.css">
<!-- Date Range Picker CSS -->
<link rel="stylesheet" href="css/daterangepicker.css">
<!-- App CSS -->
<link rel="stylesheet" href="css/app-light.css" id="lightTheme">
<link rel="stylesheet" href="css/app-dark.css" id="darkTheme" disabled>

</head>
<body class="vertical  light  ">
	<div layout:fragment="content">


		<script src="js/jquery.min.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/moment.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/simplebar.min.js"></script>
		<script src='js/daterangepicker.js'></script>
		<script src='js/jquery.stickOnScroll.js'></script>
		<script src="js/tinycolor-min.js"></script>
		<script src="js/config.js"></script>
		<script src="js/apps.js"></script>
		<script src='js/uppy.min.js'></script>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async
			src="https://www.googletagmanager.com/gtag/js?id=UA-56159088-1"></script>


			<div class="wrapper">


				<!--ë“±ë¡í¼-->
				<main role="main" class="main-content">
					<div class="container-fluid">
						<div class="row justify-content-center">
							<div class="col-12">
								<h2 class="page-title">ì‹ë‹¨ìˆ˜ì •</h2>
								<p class="text-muted">ì‹ë‹¨ìˆ˜ì •í•˜ì…ˆ</p>
								<div class="row">
									<div class="col-md-10 mb-4">
										<div class="card shadow">
											<div class="card-header">
												<strong class="card-title">My Story</strong>
											</div>
												<div class="card-body">
											<form id="frm" method="post" enctype="multipart/form-data">
													<div class="form-group mb-3">
														<label for="simpleinput">ì‹ë‹¨ì ìˆ˜</label>
														<br> <select id="mealScore" name="mealScore">
														<option th:value="${updates.mealScore}">ì„ íƒ : [[${updates.mealScore}]]</option>
															<option value="1">1ì  ğŸ¤”</option>
															<option value="1">2ì  ğŸ˜</option>
															<option value="1">3ì  ğŸ˜Š</option>
															<option value="1">4ì  ğŸ˜</option>
															<option value="1">5ì  ğŸ˜‹</option>

														</select>

													</div>
													<div class="form-group mb-3">
														<label for="example-email">ë¶„ë¥˜</label> <select
															name="typeCode" id="typeCode">
															<option th:value="${updates.typeCode}">ì„ íƒ : [[${updates.typeCode}]]</option>
															<option value="ì•„ì¹¨">ì•„ì¹¨</option>
															<option value="ì ì‹¬">ì ì‹¬</option>
															<option value="ì €ë…">ì €ë…</option>
															<option value="ê°„ì‹">ê°„ì‹</option>
														</select>
													</div>


													<div class="form-group mb-3">
														<label for="example-password">ì‹ì‚¬ëŸ‰</label> <select
															name="mealAmount" id="mealAmount" >
															<option th:value="${updates.mealAmount}">ì„ íƒ : [[${updates.mealAmount}]]</option>
															<option value="ê°€ë³ê²Œ">ê°€ë³ê²Œ</option>
															<option value="ì ë‹¹í•˜ê²Œ">ì ë‹¹í•˜ê²Œ</option>
															<option value="ë°°ë¶€ë¥´ê²Œ">ë°°ë¶€ë¥´ê²Œ</option>
															<option value="ê³¼í•˜ê²Œ">ê³¼í•˜ê²Œ</option>
														</select>
													</div>


													<div class="form-group mb-3">
														<label for="example-palaceholder">ì‹œê°„</label> 
														<input type="time" id="mealTime" name="mealTime" th:value="${updates.mealTime}">

													</div>

													<div class="form-group mb-3">
														<label for="example-textarea">ë‚´ìš©</label>
														<textarea class="form-control" id="subject" name="subject"
															rows="4">[[${updates.subject}]]</textarea>
													</div>
													<div>
														<!--íŒŒì¼ì—…ë¡œë“œ-->
														<div class="form-group row">
															<label class="col-sm-3 col-form-label">ì¸ë„¤ì¼ ë“±ë¡</label>
															<div class="col-sm-9">
																<input class="form-control" id="file" type="file"
																	name="file"><br>
																<img id="profileImg" th:src="${updates.fileDir}" style="width:150px; height:150px;">
															</div>
														</div>
													</div>
														<!-- ë²„íŠ¼ -->
														<div align=center>
															<button type="button" onclick="MealUpdate()">ìˆ˜ì •</button>
															<input type="hidden" id="feedUserId" th:value="${session.userId}">
															<input type="hidden" id="no" th:value="${updates.no}">
														</div>

											</form>
													<!-- .row -->
												</div>
										</div>
										<!-- .row -->
									</div>
									</div>
									<!-- .container-fluid -->

								</div>
								<!-- /.col -->
								<!--?>-->
							</div>
						</div>
				</main>
					</div>
				<!-- main -->
			
			<!-- .wrapper -->

		<!--íŒŒì¼ë¯¸ë¦¬ë³´ê¸° -->
		<script>
			//inputíƒœê·¸ ê°€ì ¸ì˜¤ê¸°	
			let fileTag = document.querySelector("input[name=file]");
			// íŒŒì¼ ìˆëŠ”ì§€ í™•ì¸
			fileTag.onchange = function() {
				let imgTag = document.querySelector("#profileImg");
				if (fileTag.files.length > 0) {
					//íŒŒì¼ì„ ì„ íƒí•œ ê²½ìš°, ë¯¸ë¦¬ë³´ê¸° ìƒì„± == ì´ë¯¸ì§€ íƒœê·¸ srcì— ë°ì´í„°(íŒŒì¼íƒœê·¸ì—ì„œ ì„ íƒí•œ íŒŒì¼)ë„£ì–´ì£¼ê¸°
					let reader = new FileReader();
					//readerì½ì–´ë“œë¦¬ê¸°
					reader.onload = function(data) {
						console.log(data);
						imgTag.src = data.target.result;
						imgTag.width = 250;
						imgTag.height = 150;
					}
					reader.readAsDataURL(fileTag.files[0]);
				} else {
					//ì·¨ì†Œë²„íŠ¼ ëˆ„ë¥¼ ê²½ìš°
					imgTag.src = "";
				}
			}
			</script>
			
			
			<script>
		function MealUpdate(){
			let userId = $("#feedUserId").val()
			let no = $('#no').val()
			console.log("í´ë¦­")
			
			var formData = new FormData($('#frm')[0])
			$.ajax({
				url:"/updateMeal/" + no,
				type:"post",
				data:formData,
				contentType:false,
				processData:false,
				success: function(res){
					console.log(res)
					alert("ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤")
					location.href="/myFeed/" + userId
				},
				error: function(err){
					console.log(err)
				}
				
			})
		}
		


		
		
		</script> 
		<script>
			window.dataLayer = window.dataLayer || [];

			function gtag() {
				dataLayer.push(arguments);
			}
			gtag('js', new Date());
			gtag('config', 'UA-56159088-1');
		</script>
		<!-- Scripts
    ================================================== -->
		<script src="assets/js/tippy.all.min.js"></script>
		<script src="assets/js/jquery-3.3.1.min.js"></script>
		<script src="assets/js/uikit.js"></script>
		<script src="assets/js/simplebar.js"></script>
		<script src="assets/js/custom.js"></script>


		<script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons.js"></script>
	</div>
</body>

</html>